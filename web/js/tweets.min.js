function getTweets(e,t){if(!t.username){e.twitterList.find("li").eq(0).html(t.text_specify)}else{jQuery.ajax({url:"twitter/gettweets.php",dataType:"json",timeout:15e3,success:function(n){var r="";for(i=0;i<n.length;i++){if(n[i]===undefined)break;var s=n[i].text;s=s.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"});s=s.replace(/@(\w+)/g,function(e){return'<a href="http://www.twitter.com/'+e.substring(1)+'" target="_blank">'+e+"</a>"});s=s.replace(/#(\w+)/g,function(e){return'<a href="http://twitter.com/search?q=%23'+e.substring(1)+'" target="_blank">'+e+"</a>"});r+='<li><span class="tweet-icon"></span><p>'+s+'<span class="time-ago">'+twitterlib.time.relative(n[i].created_at)+"</span>"+"</p></li>"}r+='<li class="follow">'+t.text_follow+' <a href="https://twitter.com/'+t.username+'">'+t.text_on_twitter+"</a></li>";e.twitterList.html(r);t.callback.call()},error:function(){e.twitterList.find("li").eq(0).html(t.text_error)}})}}(function(e){function t(e){var t='<li><div class="tweet">';return t+='<div class="vcard"><a href="http://twitter.com/'+e.user.screen_name+'" class="url"><img style="height: 48px; width: 48px;" alt="'+e.user.name+'" class="photo fn" height="48" src="'+e.user.profile_image_url+'" width="48" /></a></div>',t+='<div class="hentry"><strong><a href="http://twitter.com/',t+=e.user.screen_name+'" ',t+='title="'+e.user.name+'">'+e.user.screen_name+"</a></strong> ",t+='<span class="entry-content">',t+=f.ify.clean(f.expandLinks(e)),t+='</span> <span class="meta entry-meta"><a href="http://twitter.com/'+e.user.screen_name,t+="/status/"+e.id_str+'" class="entry-date" rel="bookmark"><span class="published" title="',t+=f.time.datetime(e.created_at)+'">'+f.time.relative(e.created_at)+"</span></a>",e.source&&(t+=" <span>from "+e.source+"</span>"),e.retweetedby&&(t+=" <span>retweeted by "+e.retweetedby.screen_name+"</span>"),t+="</span></div></div></li>",t}function n(e){var t=d.getElementById(f+e);t&&v.removeChild(d.getElementById(f+e)),delete g[f+e],p[f+e]=S;try{delete p[f+e]}catch(n){}}function r(e,t,r){var i=d.createElement("script"),s=null;t==S&&(t={}),h++,g["twitterlib"+h]=!0,p["twitterlib"+h]=function(e,t){return function(i){var s=0,o=[];if(i.results){i=i.results,s=i.length;while(s--)i[s].user={id:i[s].from_user_id,screen_name:i[s].from_user,profile_image_url:i[s].profile_image_url},i[s].source=f.ify.entities(i[s].source),o=i[s].created_at.split(" "),i[s].created_at=[o[0],o[2],o[1],o[4],o[5],o[3]].join(" ").replace(/,/,"")}else if(i.length&&i[0].sender){s=i.length;while(s--)i[s].user=i[s].sender,i[s].originalText=i[s].text,i[s].text="@"+i[s].recipient_screen_name+" "+i[s].text}else if(t.rts==1||t.rts=="t"||t.rts==1){s=i.length;while(s--)i[s].retweeted_status&&(i[s].retweeted_status.retweetedby=i[s].user,i[s]=i[s].retweeted_status)}t.originalTweets=i,t.filter&&(i=k.matchTweets(i,t.filter)),t.limit&&t.limit<i.length&&(i=i.splice(0,t.limit));if(x&&t.page>1)try{sessionStorage.setItem("twitterlib.page"+t.page+".tweets",JSON.stringify(i)),sessionStorage.setItem("twitterlib.page"+t.page+".originalTweets",JSON.stringify(t.originalTweets)),sessionStorage.setItem("twitterlib.page"+t.page,"true")}catch(u){}t.cached=!1,r.call(f,i,t),n(e)}}(h,t),s=e.match(/callback=(.*)/),s!=null&&s.length>1?p[s[1]]=p["twitterlib"+h]:e+="&callback=twitterlib"+h;if(!x||t.page<=1||x&&sessionStorage.getItem("twitterlib.page"+t.page)==null)i.src=e,i.id="twitterlib"+h,v.appendChild(i);else if(x){n(h),t.cached=!0,t.originalTweets=JSON.parse(sessionStorage.getItem("twitterlib.page"+t.page+".originalTweets"));var o=JSON.parse(sessionStorage.getItem("twitterlib.page"+t.page+".tweets")||"[]");t.filter&&(o=k.matchTweets(o,t.filter)),t.limit&&t.limit<o.length&&(o=o.splice(0,t.limit)),r.call(f,o,t)}}function i(e,t){return E[e].replace(/(\b.*?)%(.*?)(\|.*?)?%/g,function(e,n,r,i){if(i&&i.substr(1)=="remove"&&t[r]==S)return"";var s=r=="limit"?t[r]+10:t[r];return n+(t[r]===S&&i!==S?i.substr(1):s)})}function s(e,t){return typeof e=="function"&&(t=e,e={}),e===S&&(e={}),e.page=e.page||1,e.callback=t,e.limit===0&&delete e.limit,e}function o(e,t,n){m={method:e,arg:t,options:n,callback:n.callback,page:n.page||1},n.method=e;if(x){var r=JSON.parse(sessionStorage.getItem("twitterlib.last_request")||"{}");if(m.method!=r.method||m.arg!=r.arg)u(),sessionStorage.setItem("twitterlib.last_request",JSON.stringify(m))}}function u(){var e=sessionStorage.length;while(e--)sessionStorage.key(e).substr(0,"twitterlib".length)=="twitterlib"&&sessionStorage.removeItem(sessionStorage.key(e))}function a(e,t,n){return t&&E[e]==S&&(E[e]=t),this[e]==S&&(this[e]=function(t,n,u){return typeof t=="function"?(u=t,t=""):t.toString()=="[Object object]"&&(u=n,n=t,t=""),n=s(n,u),o(e,t,n),n[e]=n.user=t,n.search=encodeURIComponent(t),n.callback&&r(i(e,n),n,n.callback),this}),this[e]}var f={};if(typeof exports!="undefined"&&typeof require=="function"){var l=require("url").parse,c=require("http");this.document={location:{protocol:"http:"},head:{appendChild:function(e){if(!e.src)return;var t=l(e.src,!0),n=c.createClient(80,t.host).request("GET",t.pathname+t.search,{host:t.host}),r="",i=p[t.query.callback];n.on("response",function(e){e.setEncoding("utf8"),e.on("data",function(e){r+=e}).on("end",function(){switch(e.statusCode){case 200:r=r.replace(new RegExp("^"+t.query.callback+"\\("),"").replace(/\);*$/,""),g[t.query.callback]&&i(JSON.parse(r));break;case 304:break;case 401:}})}).end()}},getElementById:function(){},createElement:function(e){return{type:e,id:null,src:""}}}}var h=+(new Date),p=this,d=p.document,v=d.head||d.getElementsByTagName("head")[0],m={},g={},y={"&quot;":'"',"&lt;":"<","&gt;":">"},b=d.location.protocol.substr(0,4)=="http"?d.location.protocol:"http:",w={search:b+"//search.twitter.com/search.json?q=%search%&page=%page|1%&rpp=%limit|100%&since_id=%since|remove%&result_type=recent&include_entities=true",timeline:b+"//api.twitter.com/1/statuses/user_timeline.json?screen_name=%user%&count=%limit|200%&page=%page|1%&since_id=%since|remove%include_rts=%rts|false%&include_entities=true",list:b+"//api.twitter.com/1/%user%/lists/%list%/statuses.json?page=%page|1%&per_page=%limit|200%&since_id=%since|remove%&include_entities=true&include_rts=%rts|false%",favs:b+"//api.twitter.com/1/favorites/%user%.json?include_entities=true&skip_status=true&page=%page|1%&since_id=%since|remove%",retweets:b+"//api.twitter.com/1/statuses/retweeted_by_user.json?screen_name=%user%&include_entities=true&count=%limit|200%&since_id=%since|remove%&page=%page|1%"},E=w,S,x=!1,T=function(){return{entities:function(e){return e.replace(/(&[a-z0-9]+;)/g,function(e){return y[e]})},link:function(e){return e.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=]+[^:\.,\)\s*$])/ig,function(e,t){return'<a title="'+e+'" href="'+e+'">'+(t.length>36?t.substr(0,35)+"&hellip;":t)+"</a>"})},at:function(e){return e.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15}(\/[a-zA-Z0-9-_]+)*)/g,function(e,t,n){return t+'<a href="http://twitter.com/'+n+'">@'+n+"</a>"})},hash:function(e){return e.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_^"^<]+)/g,function(e,t,n){return e.substr(-1)==='"'||e.substr(-1)=="<"?e:t+'<a href="http://search.twitter.com/search?q=%23'+n+'">#'+n+"</a>"})},clean:function(e){return this.hash(this.at(this.link(e)))}}}(),N=function(e){if(e===S)return"";var t=e.text,n=0;if(e.entities){if(e.entities.urls&&e.entities.urls.length)for(n=0;n<e.entities.urls.length;n++)e.entities.urls[n].expanded_url&&(t=t.replace(e.entities.urls[n].url,e.entities.urls[n].expanded_url));if(e.entities.media&&e.entities.media.length)for(n=0;n<e.entities.media.length;n++)if(e.entities.media[n].media_url||e.entities.media[n].expanded_url)t=t.replace(e.entities.media[n].url,e.entities.media[n].media_url?e.entities.media[n].media_url:e.entities.media[n].expanded_url)}return t},C=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{time:function(e){var t=e.getHours(),n=e.getMinutes()+"",r="AM";return t==0?t=12:t==12?r="PM":t>12&&(t-=12,r="PM"),n.length==1&&(n="0"+n),t+":"+n+" "+r},date:function(t){var n=e[t.getMonth()],r=t.getDate()+"",i=~~r,s=t.getFullYear(),o=(new Date).getFullYear(),u="th";return i%10==1&&r.substr(0,1)!="1"?u="st":i%10==2&&r.substr(0,1)!="1"?u="nd":i%10==3&&r.substr(0,1)!="1"&&(u="rd"),r.substr(0,1)=="0"&&(r=r.substr(1)),n+" "+r+u+(o!=s?", "+s:"")},shortdate:function(t){var n=t.split(" "),r=Date.parse(n[1]+" "+n[2]+", "+n[5]+" "+n[3]),i=new Date(r),s=e[i.getMonth()],o=i.getDate()+"",u=i.getFullYear(),a=(new Date).getFullYear();return a===u?o+" "+s:o+" "+s+(u+"").substr(2,2)},datetime:function(e){var t=e.split(" "),n=new Date(Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]));return this.time(n)+" "+this.date(n)},relative:function(e){var t=e.split(" "),n=Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]),r=new Date(n),i=arguments.length>1?arguments[1]:new Date,s=~~((i.getTime()-n)/1e3),o="";return s+=i.getTimezoneOffset()*60,s<=1?o="1 second ago":s<60?o=s+" seconds ago":s<120?o="1 minute ago":s<2700?o=~~(s/60)+" minutes ago":s<10800?o="1 hour ago":s<86400?o=~~(s/3600)+" hours ago":o=this.shortdate(e),o}}}(),k=function(){return{match:function(e,t,n){var r=0,i="",s=e.text.toLowerCase(),o=(!t.and||!t.and.length)&&(!t.or||!t.or.length);typeof t=="string"&&(t=this.format(t));if(t.not&&t.not.length){for(r=0;r<t.not.length;r++)if(s.indexOf(t.not[r])!==-1)return!1;if(o)return!0}else if({}.toString.call(t.not)!=="[object Array]"){if(t.not.test(s))return!1;if(o)return!0}if(t.and&&t.and.length)for(r=0;r<t.and.length;r++){i=t.and[r];if(i.substr(0,3)==="to:"){if(!RegExp("^@"+i.substr(3)).test(s))return!1}else if(i.substr(0,5)=="from:"){if(e.user.screen_name!==i.substr(5))return!1}else if(s.indexOf(i)===-1)return!1}else if(typeof t["and"]=="function"&&t.and.test(s))return!0;if(t.or&&t.or.length)for(r=0;r<t.or.length;r++){i=t.or[r];if(i.substr(0,3)==="to:"){if(RegExp("^@"+i.substr(3)).test(s))return!0}else if(i.substr(0,5)=="from:"){if(e.user.screen_name===i.substr(5))return!0}else if(s.indexOf(t.or[r])!==-1)return!0}else if(typeof t["or"]=="function"){if(t.or.test(s))return!0}else if(t.and&&t.and.length)return!0;return!1},format:function(e,t){var n=[],r=[],i=[],s=0,o=[],u="",a="";e.replace(/(-?["'](.*?)["']|\S+)/g,function(e){var t=!1;e.substr(0,1)=="-"&&(t=!0),e=e.replace(/["']+|["']+$/g,""),t?o.push(e.substr(1).toLowerCase()):n.push(e)});for(s=0;s<n.length;s++)n[s]=="OR"&&n[s+1]?(r.push(n[s-1].toLowerCase()),r.push(n[s+1].toLowerCase()),s++,i.pop()):i.push(n[s].toLowerCase());return{or:r,and:i,not:o}},matchTweets:function(e,t,n){var r=[],i,s=0;typeof t=="string"&&(t=this.format(t));for(s=0;s<e.length;s++)this.match(e[s],t,n)&&r.push(e[s]);return r}}}();f={custom:a,status:function(e,t,n){return t=s(t,n),t.limit=1,o("status",e,t),this.timeline(e,t,t.callback)},list:function(e,t,n){var u=e.split("/");return t=s(t,n),o("list",e,t),t.user=u[0],t.list=u[1],t.callback&&r(i("list",t),t,t.callback),this},next:function(){return m.method&&(m.page++,m.options.page=m.page,this[m.method](m.arg,m.options,m.callback)),this},refresh:function(){return m.method&&this[m.method](m.arg,m.options,m.callback),this},time:C,ify:T,filter:k,expandLinks:N,cancel:function(){for(var e in g)p[e]=function(){return function(e){n(e)}}(e.replace("twitterlib",""));return g={},this},reset:function(){E=w,m.method=""},render:t,debug:function(e){for(var t in e)E[t]=e[t];return this},cache:function(e){x=e==S?!0:e;if(!p.JSON||!p.sessionStorage)x=!1}},f.custom("search"),f.custom("timeline"),f.custom("favs"),f.custom("retweets"),typeof exports!="undefined"&&(module.exports=f),e.twitterlib=f})(this)